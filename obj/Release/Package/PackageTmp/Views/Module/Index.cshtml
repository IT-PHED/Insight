@{
    ViewBag.Title = "Index"; Layout = "~/Views/Shared/_PHEDServeLayoutPage.cshtml";
}


 
<link href="~/Scripts/sweetalert2-master/dist/sweetalert.css" rel="stylesheet" />
<script src="~/Scripts/sweetalert2-master/dist/sweetalert.js"></script>



<div class="card">
    <div class="card-header">
        <h4 class="card-title">Modules</h4>
    </div>
    <div class="card-body">

        <div class="panel registration-form">
            <div class="panel-body">


                <section class="panel panel-default">
                    <br />
                   
                    <div class="row" id="Holder">

                        <div class="col-md-8 offset-md-2">

                            <div class="card-body">



                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered">
                                        <thead>

                                            <tr style="background-color: whitesmoke">
                                                <th class="text-center" style="text-align:center" colspan="5">

                                                    <span class="input-group">
                                                        <button style="float: left" class="btn btn-info" type="button" data-bind="click:$root.addRecord">
                                                            <span class="icon icon-plus " aria-hidden="true"></span>
                                                            Add New

                                                        </button>
                                                        <button style="float:left; margin-left:15px" class="btn btn-primary" type="button" data-bind="click:$root.save">
                                                            <span class="icon icon-save" aria-hidden="true"></span>
                                                            Save Changes

                                                        </button>
                                                    </span>
                                                </th>

                                            </tr>
                                            <tr>
                                                <th style="text-align:center">#</th>
                                                <th>Module Name</th>
                                                <th>Icon</th>
                                                <th>Position</th>
                                                <th style="text-align:center">Del</th>
                                            </tr>


                                        </thead>
                                        <tbody>
                                            <!-- ko foreach: AllDataList() -->
                                            <tr>
                                                <td style="text-align:center"><span data-bind="text: $index() + 1 "></span></td>
                                                <td>
                                                    <input type="text"  style="width:100%; border-style:none;  border-top-style:none; background:none; background-color:none; border-radius: 0px; padding:0px; margin:0px" data-bind="value: $data.MenuText" />

                                                </td>
                                                <td>
                                                    <input type="text"   style="width:100%; border-style:none;  border-top-style:none; background:none; background-color:none; border-radius: 0px; padding:0px; margin:0px" data-bind="value: $data.icon" />


                                                </td>


                                                <td>
                                                    <input type="number"   style="width:100%; border-style:none;  border-top-style:none; background:none; background-color:none; border-radius: 0px; padding:0px; margin:0px" data-bind="value: $data.MenuOrder" />

                                                </td>

                                                <th style="text-align:center">
                                                    <span class="icon icon-trash" style="color:#fb6b5b; font-size:18px; cursor:pointer; padding-top:15px;padding-left:15px"
                                                          title="Click here to delete record"
                                                          data-bind="click:function () { $root.delete($data); }"></span>
                                                </th>

                                            </tr>

                                            <!-- /ko -->
                                        </tbody>

                                    </table>
                                </div>



                            </div>

                        </div>


                    </div>


                    <br /> <br />
                </section>



                </div>

            </div>
        </div>
    </div>


































                <script src="~/js/bootstrap.js"></script>

                @*<script src="~/js/app.js"></script>*@
                <script src="~/js/PagingTable/jquery-1.10.2.min.js"></script>

                <script src="~/js/PagingTable/jquery.dataTables.js"></script>
                <script src="~/js/PagingTable/dataTables.bootstrap.js"></script>

                <script src="~/Scripts/jquery-1.10.2.js"></script>
                <script src="~/Scripts/knockout-3.4.0.debug.js"></script>
                <script src="~/Scripts/knockout-3.4.0.js"></script>
                <script src="~/Scripts/KnockOutMapping.js"></script>
                <script src="~/js/sweetalert2-master/dist/sweetalert.js"></script>
                <script src="~/js/sweetalert2-master/dist/sweetalert.min.js"></script>
                <script type="text/javascript" src="assets/js/pages/components_loaders.js"></script>

                <script src="~/Scripts/Modules.js"></script>

                <script type="text/javascript">




                    $(document).ready(function () {
                        var AllReferenceCheckViewModel;
                        $.ajax({
                            url: '/Module/loadReferenceViewModel',
                            type: 'GET',
                            dataType: 'JSON',
                            success: function (result) {

                                var data = JSON.parse(result);

                                console.log("Data From Server " + JSON.stringify(data));
                                AllReferenceCheckViewModel = new ReferencesViewModel(data);
                                AllReferenceCheckViewModel.isProcessing(false);
                                ko.applyBindings(AllReferenceCheckViewModel);

                                //$("#ContinentPage").DataTable({ responsive: true });
                            },
                            error: function (result) {
                                //left for brevity

                                alert("Failed" + result.responseText);
                            }
                        });


                    });













                </script>
                <script>
                    ko.bindingHandlers.date = {
                        // https://disqus.com/home/discussion/jasonmitchellcom/binding_and_formatting_dates_using_knockout_and_moment_js/#comment-1374417079
                        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
                            ko.utils.registerEventHandler(element, 'change', function () {
                                var value = valueAccessor();
                                if (element.value !== null && element.value !== undefined && element.value.length > 0) {
                                    value(element.value);
                                }
                                else {
                                    value('');
                                }
                            });
                        },
                        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
                            var value = valueAccessor();
                            var allBindings = allBindingsAccessor();
                            var valueUnwrapped = ko.utils.unwrapObservable(value);

                            // Date formats: http://momentjs.com/docs/#/displaying/format/
                            var pattern = allBindings.format || 'DD/MM/YYYY';

                            var output = "-";
                            if (valueUnwrapped !== null && valueUnwrapped !== undefined && valueUnwrapped.length > 0) {
                                output = moment(valueUnwrapped).format(pattern);
                            }

                            if ($(element).is("input") === true) {
                                $(element).val(output);
                            } else {
                                $(element).text(output);
                            }
                        }
                    };
                </script>
