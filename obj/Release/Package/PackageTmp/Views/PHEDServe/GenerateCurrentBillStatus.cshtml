@{
    ViewBag.Title = "IBCApproval";
    Layout = "~/Views/Shared/_PHEDServeLayoutPage.cshtml";
}


<link href="~/Scripts/bootstrap-datatable/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
<link href="~/Scripts/bootstrap-datatable/css/buttons.bootstrap4.min.css" rel="stylesheet" />
<link href="~/Scripts/bootstrap-datatable/css/dataTables.custom.css" rel="stylesheet" />
<link href="~/assets/css/AMRCustomCSS/custom.min.css" rel="stylesheet" />

<div class="card">
    <div class="card-header">
        <h4 class="card-title">
           Staff Bill Payment Report
        </h4>
    </div>

    <div class="card-body">
        <div class="row">


            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="dashboard_graph">

                    <div class="row tile_count">
                        @*<div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                    <span class="count_top"><i class="fa fa-user"></i> Total Number of </span>
                    <div class="count green"><span data-bind="text:AMRdata.TotalRead"></span></div>
                    <span class="count_bottom"><i class="green"> </i>Meters Read .</span>
                </div>*@



                        <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count" style="align-content:center">
                            <span class="count_top"><i class="fa fa-clock-o"></i> Number of Staff</span>
                            <div class="count blue" data-bind="text:TotalNumberOfStaff">1,598</div>
                            <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i> </i>in PHED Staff DB</span>
                        </div>

                        <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count" style="align-content:center">
                            <span class="count_top"><i class="fa fa-clock-o"></i> Number of  Staff</span>
                            <div class="count blue" data-bind="text:TotalNumberOfCompletedStaff">798</div>
                            <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i> </i>with Completed Profile</span>
                        </div>

                        <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                            <span class="count_top"><i class="fa fa-user"></i> Number of Staff </span>
                            <div class="count green" data-bind="text:NumberPaidThisMonth">433</div>
                            <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i></i> that paid this Month </span>
                        </div>

                        <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                            <span class="count_top"><i class="fa fa-user"></i>Number of Staff on </span>
                            <div class="count green" data-bind="text:StaffPrepaid">768</div>
                            <span class="count_bottom"><i class="red"><i class="fa fa-sort-desc"></i> </i>PREPAID Meters</span>
                        </div>

                        <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                            <span class="count_top"><i class="fa fa-user"></i> Number of Staff on</span>
                            <div class="count red" data-bind="text:StaffPostpaid">456</div>
                            <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i></i>  POSTPAID Meters</span>
                        </div>

                        <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                            <span class="count_top"><i class="fa fa-user"></i> %age Compliance </span>
                            <div class="count blue" data-bind="text:PercentageSuccess">66% </div>
                            <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i></i>with Directive Today </span>
                        </div>

                    </div>
                </div>
                </div>
            <hr />
             
                    <div class="col-md-12">
                        <div class="dataTables_wrapper container-fluid dt-bootstrap4">
                            <div class="row">

                                <div class="col-md-2 form-group">
                                    <label>Submission Status</label>
                                    <select class="form-control" data-bind="value:SubmissionStatus">
                                        <option>--Select Option--</option>
                                        <option>NOT COMPLETED</option>
                                        <option>COMPLETED</option>
                                    </select>
                                </div>

                                <div class="col-md-4 form-group">
                                    <label>Report Status</label>
                                    <select class="form-control" data-bind="value:ReportStatus">
                                        <option>--Select Option--</option>
                                        <option>Generate Payment List</option>
                                        <option>View Payment List</option>
                                    </select>
                                </div>
                                 
                                <div class="col-md-2 form-group">
                                    <label>Payroll Month</label>
                                    <input type="date" class="form-control" data-bind="value:ReportDate" />
                                </div>

                                <div class="col-md-2 form-group">
                                    <label>From</label>
                                    <input type="text" class="form-control" data-bind="value:FromNo" />
                                </div>

                                <div class="col-md-2 form-group">
                                    <label>To</label>
                                    <input type="text" class="form-control" data-bind="value:ToNo" />
                                </div>

                                <div class="col-md-12">
                                    <hr />
                                    <div class="form-group" style="overflow: hidden;">
                                        <button style="float: right" type="submit" class="btn btn-primary center-block" data-bind="click:GenerateBillPaymentList">Generate Bill Payment List</button>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" id="HiddenStatus" value="MAPAPPLIED" />
                            <div data-bind="if: StaffBillPaymentDataList() < 1"><span style=" display: block; text-align: center; font-size: 15px; background: #eff4f8; padding: 10px; border-radius: 4px; " data-bind="text: message"></span></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table data-bind="if: StaffBillPaymentDataList().length >= 1" id="StaffPaymentList" class="table table-striped table-bordered" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>S/No</th>
                                        <th>StaffID</th>
                                        <th>Staff Name</th>
                                        <th>Account No</th>
                                        <th>AccountType</th>
                                        <th>Arrears</th>
                                        <th>Amount Paid</th>
                                        <th>Date Paid</th>
                                        <th>Comments</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- ko foreach: StaffBillPaymentDataList() -->
                                    <tr>
                                        <td><span data-bind="text:$index() +1"></span></td>
                                        <td style="cursor:pointer"><span data-bind="text: Staff_Id"></span></td>
                                        <td><span data-bind="text: Surname"></span> <span data-bind="text: OtherNames"></span></td>
                                        <td><span data-bind="text: AccountNo"></span></td>
                                        <td><span data-bind="text: AccountType"></span></td>
                                        <td><span data-bind="text: Arrears"></span></td>
                                        <td><span data-bind="text: AmountPaid"></span></td>
                                        <td><span data-bind="Date: DatePaid"></span></td>
                                        <td><span data-bind="text: Comments"></span> </td>
                                        @*<td><button data-bind="click:function () { $root.ApproveBRCBillsForPayment($data); }" class="btn btn-block btn-primary">Approve</button></td>*@
                                    </tr>
                                    <!-- /ko -->
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th>S/No</th>
                                        <th>StaffID</th>
                                        <th>Staff Name</th>
                                        <th>Account No</th>
                                        <th>Arrears</th>
                                        <th>Amount Paid</th>
                                        <th>Date Paid</th>
                                        <th>Comments</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>












        </div>
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<link href="~/Scripts/sweetalert2-master/dist/sweetalert.css" rel="stylesheet" />
<script src="~/Scripts/sweetalert2-master/dist/sweetalert.js"></script>

<script src="~/Scripts/bootstrap-datepicker.min.js"></script>
<script src="~/Scripts/datepicker.js"></script>

@*Datatable Paths*@
<script src="~/Scripts/bootstrap-datatable/js/jquery.dataTables.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/dataTables.bootstrap4.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/dataTables.buttons.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/buttons.bootstrap4.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/jszip.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/pdfmake.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/vfs_fonts.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/buttons.html5.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/buttons.print.min.js"></script>
<script src="~/Scripts/bootstrap-datatable/js/buttons.colVis.min.js"></script>

<script src="~/Scripts/knockout-3.4.0.debug.js"></script>
<script src="~/Scripts/knockout-3.4.0.js"></script>
<script src="~/Scripts/KnockOutMapping.js"></script>
<script src="~/Scripts/PHEDTribe.js"></script>







<script>

    ko.bindingHandlers.Date = {
        update: function (element, valueAccessor) {
            var value = valueAccessor();
            var date = moment(value());
            var strDate = date.format("LL");
            $(element).text(strDate);
        }
    };


</script>



<script type="text/javascript">

    $(document).ready(function () {

        var RegVM;
        showloader();
        $.ajax({
            url: '/Account/loadRegisterModel',
            type: 'GET',
            dataType: 'JSON',
            success: function (result) {
                var data = JSON.parse(result);

                console.log("Data From Server " + JSON.stringify(data));
                RegVM = new RegViewModel(data);
                ko.applyBindings(RegVM);
                hideloader();
                //$("#ContinentPage").DataTable({ responsive: true });
            },
            error: function (result) {
                //left for brevity

                alert("Failed" + result.responseText);
            }
        });


    });

    function hideloader() {

        swal.close();
    }
    function showloader() {
        swal({
            title: "Loading...",
            text: "Please wait",
            imageUrl: 'http://phedpayments.nepamsonline.com/images/loader4.gif',

            showConfirmButton: false,
            allowOutsideClick: false
        });


    };
</script>

